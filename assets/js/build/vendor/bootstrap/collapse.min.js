"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var NAME="collapse",VERSION="4.4.1",DATA_KEY="bs.collapse",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],Default={toggle:!0,parent:""},DefaultType={toggle:"boolean",parent:"(string|element)"},Event={SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),CLICK_DATA_API:"click".concat(EVENT_KEY).concat(DATA_API_KEY)},ClassName={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},Dimension={WIDTH:"width",HEIGHT:"height"},Selector={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},Collapse=function(){function e(t,a){_classCallCheck(this,e),this._isTransitioning=!1,this._element=t,this._config=this._getConfig(a),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'.concat(t.id,'"],')+'[data-toggle="collapse"][data-target="#'.concat(t.id,'"]')));for(var l=[].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE)),n=0,r=l.length;n<r;n++){var i=l[n],s=_util.default.getSelectorFromElement(i),o=[].slice.call(document.querySelectorAll(s)).filter(function(e){return e===t});null!==s&&o.length>0&&(this._selector=s,this._triggerArray.push(i))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return _createClass(e,[{key:"toggle",value:function(){(0,_jquery.default)(this._element).hasClass(ClassName.SHOW)?this.hide():this.show()}},{key:"show",value:function(){var t,a,l=this;if(!this._isTransitioning&&!(0,_jquery.default)(this._element).hasClass(ClassName.SHOW)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(Selector.ACTIVES)).filter(function(e){return"string"==typeof l._config.parent?e.getAttribute("data-parent")===l._config.parent:e.classList.contains(ClassName.COLLAPSE)})).length&&(t=null),!(t&&(a=(0,_jquery.default)(t).not(this._selector).data(DATA_KEY))&&a._isTransitioning))){var n=_jquery.default.Event(Event.SHOW);if((0,_jquery.default)(this._element).trigger(n),!n.isDefaultPrevented()){t&&(e._jQueryInterface.call((0,_jquery.default)(t).not(this._selector),"hide"),a||(0,_jquery.default)(t).data(DATA_KEY,null));var r=this._getDimension();(0,_jquery.default)(this._element).removeClass(ClassName.COLLAPSE).addClass(ClassName.COLLAPSING),this._element.style[r]=0,this._triggerArray.length&&(0,_jquery.default)(this._triggerArray).removeClass(ClassName.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var i=r[0].toUpperCase()+r.slice(1),s="scroll".concat(i),o=_util.default.getTransitionDurationFromElement(this._element);(0,_jquery.default)(this._element).one(_util.default.TRANSITION_END,function(){(0,_jquery.default)(l._element).removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE).addClass(ClassName.SHOW),l._element.style[r]="",l.setTransitioning(!1),(0,_jquery.default)(l._element).trigger(Event.SHOWN)}).emulateTransitionEnd(o),this._element.style[r]="".concat(this._element[s],"px")}}}},{key:"hide",value:function(){var e=this;if(!this._isTransitioning&&(0,_jquery.default)(this._element).hasClass(ClassName.SHOW)){var t=_jquery.default.Event(Event.HIDE);if((0,_jquery.default)(this._element).trigger(t),!t.isDefaultPrevented()){var a=this._getDimension();this._element.style[a]="".concat(this._element.getBoundingClientRect()[a],"px"),_util.default.reflow(this._element),(0,_jquery.default)(this._element).addClass(ClassName.COLLAPSING).removeClass(ClassName.COLLAPSE).removeClass(ClassName.SHOW);var l=this._triggerArray.length;if(l>0)for(var n=0;n<l;n++){var r=this._triggerArray[n],i=_util.default.getSelectorFromElement(r);if(null!==i)(0,_jquery.default)([].slice.call(document.querySelectorAll(i))).hasClass(ClassName.SHOW)||(0,_jquery.default)(r).addClass(ClassName.COLLAPSED).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[a]="";var s=_util.default.getTransitionDurationFromElement(this._element);(0,_jquery.default)(this._element).one(_util.default.TRANSITION_END,function(){e.setTransitioning(!1),(0,_jquery.default)(e._element).removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE).trigger(Event.HIDDEN)}).emulateTransitionEnd(s)}}}},{key:"setTransitioning",value:function(e){this._isTransitioning=e}},{key:"dispose",value:function(){_jquery.default.removeData(this._element,DATA_KEY),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}},{key:"_getConfig",value:function(e){return(e=_objectSpread({},Default,{},e)).toggle=Boolean(e.toggle),_util.default.typeCheckConfig(NAME,e,DefaultType),e}},{key:"_getDimension",value:function(){return(0,_jquery.default)(this._element).hasClass(Dimension.WIDTH)?Dimension.WIDTH:Dimension.HEIGHT}},{key:"_getParent",value:function(){var t,a=this;_util.default.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var l='[data-toggle="collapse"][data-parent="'.concat(this._config.parent,'"]'),n=[].slice.call(t.querySelectorAll(l));return(0,_jquery.default)(n).each(function(t,l){a._addAriaAndCollapsedClass(e._getTargetFromElement(l),[l])}),t}},{key:"_addAriaAndCollapsedClass",value:function(e,t){var a=(0,_jquery.default)(e).hasClass(ClassName.SHOW);t.length&&(0,_jquery.default)(t).toggleClass(ClassName.COLLAPSED,!a).attr("aria-expanded",a)}}],[{key:"_getTargetFromElement",value:function(e){var t=_util.default.getSelectorFromElement(e);return t?document.querySelector(t):null}},{key:"_jQueryInterface",value:function(t){return this.each(function(){var a=(0,_jquery.default)(this),l=a.data(DATA_KEY),n=_objectSpread({},Default,{},a.data(),{},"object"===_typeof(t)&&t?t:{});if(!l&&n.toggle&&/show|hide/.test(t)&&(n.toggle=!1),l||(l=new e(this,n),a.data(DATA_KEY,l)),"string"==typeof t){if(void 0===l[t])throw new TypeError('No method named "'.concat(t,'"'));l[t]()}})}},{key:"VERSION",get:function(){return VERSION}},{key:"Default",get:function(){return Default}}]),e}();(0,_jquery.default)(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var t=(0,_jquery.default)(this),a=_util.default.getSelectorFromElement(this),l=[].slice.call(document.querySelectorAll(a));(0,_jquery.default)(l).each(function(){var e=(0,_jquery.default)(this),a=e.data(DATA_KEY)?"toggle":t.data();Collapse._jQueryInterface.call(e,a)})}),_jquery.default.fn[NAME]=Collapse._jQueryInterface,_jquery.default.fn[NAME].Constructor=Collapse,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Collapse._jQueryInterface};var _default=Collapse;exports.default=_default;