"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery")),_util=_interopRequireDefault(require("./util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var NAME="tab",VERSION="4.4.1",DATA_KEY="bs.tab",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),CLICK_DATA_API:"click".concat(EVENT_KEY).concat(DATA_API_KEY)},ClassName={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},Selector={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},Tab=function(){function e(t){_classCallCheck(this,e),this._element=t}return _createClass(e,[{key:"show",value:function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&(0,_jquery.default)(this._element).hasClass(ClassName.ACTIVE)||(0,_jquery.default)(this._element).hasClass(ClassName.DISABLED))){var t,a,r=(0,_jquery.default)(this._element).closest(Selector.NAV_LIST_GROUP)[0],l=_util.default.getSelectorFromElement(this._element);if(r){var n="UL"===r.nodeName||"OL"===r.nodeName?Selector.ACTIVE_UL:Selector.ACTIVE;a=(a=_jquery.default.makeArray((0,_jquery.default)(r).find(n)))[a.length-1]}var u=_jquery.default.Event(Event.HIDE,{relatedTarget:this._element}),i=_jquery.default.Event(Event.SHOW,{relatedTarget:a});if(a&&(0,_jquery.default)(a).trigger(u),(0,_jquery.default)(this._element).trigger(i),!i.isDefaultPrevented()&&!u.isDefaultPrevented()){l&&(t=document.querySelector(l)),this._activate(this._element,r);var s=function(){var t=_jquery.default.Event(Event.HIDDEN,{relatedTarget:e._element}),r=_jquery.default.Event(Event.SHOWN,{relatedTarget:a});(0,_jquery.default)(a).trigger(t),(0,_jquery.default)(e._element).trigger(r)};t?this._activate(t,t.parentNode,s):s()}}}},{key:"dispose",value:function(){_jquery.default.removeData(this._element,DATA_KEY),this._element=null}},{key:"_activate",value:function(e,t,a){var r=this,l=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?(0,_jquery.default)(t).children(Selector.ACTIVE):(0,_jquery.default)(t).find(Selector.ACTIVE_UL))[0],n=a&&l&&(0,_jquery.default)(l).hasClass(ClassName.FADE),u=function(){return r._transitionComplete(e,l,a)};if(l&&n){var i=_util.default.getTransitionDurationFromElement(l);(0,_jquery.default)(l).removeClass(ClassName.SHOW).one(_util.default.TRANSITION_END,u).emulateTransitionEnd(i)}else u()}},{key:"_transitionComplete",value:function(e,t,a){if(t){(0,_jquery.default)(t).removeClass(ClassName.ACTIVE);var r=(0,_jquery.default)(t.parentNode).find(Selector.DROPDOWN_ACTIVE_CHILD)[0];r&&(0,_jquery.default)(r).removeClass(ClassName.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if((0,_jquery.default)(e).addClass(ClassName.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),_util.default.reflow(e),e.classList.contains(ClassName.FADE)&&e.classList.add(ClassName.SHOW),e.parentNode&&(0,_jquery.default)(e.parentNode).hasClass(ClassName.DROPDOWN_MENU)){var l=(0,_jquery.default)(e).closest(Selector.DROPDOWN)[0];if(l){var n=[].slice.call(l.querySelectorAll(Selector.DROPDOWN_TOGGLE));(0,_jquery.default)(n).addClass(ClassName.ACTIVE)}e.setAttribute("aria-expanded",!0)}a&&a()}}],[{key:"_jQueryInterface",value:function(t){return this.each(function(){var a=(0,_jquery.default)(this),r=a.data(DATA_KEY);if(r||(r=new e(this),a.data(DATA_KEY,r)),"string"==typeof t){if(void 0===r[t])throw new TypeError('No method named "'.concat(t,'"'));r[t]()}})}},{key:"VERSION",get:function(){return VERSION}}]),e}();(0,_jquery.default)(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){e.preventDefault(),Tab._jQueryInterface.call((0,_jquery.default)(this),"show")}),_jquery.default.fn[NAME]=Tab._jQueryInterface,_jquery.default.fn[NAME].Constructor=Tab,_jquery.default.fn[NAME].noConflict=function(){return _jquery.default.fn[NAME]=JQUERY_NO_CONFLICT,Tab._jQueryInterface};var _default=Tab;exports.default=_default;